<?xml version="1.0" encoding="UTF-8" ?>
<!-- mapper DTD 선언 -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zerobase.zerolms.admin.mapper.MemberMapper">

    <select id="selectList" parameterType="com.zerobase.zerolms.admin.model.MemberParam"
            resultType="com.zerobase.zerolms.admin.dto.MemberDto">
        select * from member
        where 1=1
        <if test="searchType != null and searchValue != null">
        <choose>
            <when test="searchType == 'user_id'">
                AND user_id like concat('%',#{searchValue},'%')
            </when>
              <when test="searchType == 'user_name'">
                AND user_name like concat('%',#{searchValue},'%')
            </when>
             <when test="searchType == 'phone'">
                AND phone like concat('%',#{searchValue},'%')
            </when>
            <otherwise>
                and(
                 user_id like concat('%',#{searchValue},'%')
                OR user_name like concat('%',#{searchValue},'%')
                OR phone like concat('%',#{searchValue},'%')
                )
            </otherwise>

        </choose>
        </if>

    limit #{pageStart},#{pageEnd}
</select>
    <select id="selectListCount" parameterType="com.zerobase.zerolms.admin.model.MemberParam" resultType="long">
    select count(*) from member;
    </select>

<!--
limit 0 ,10 ==> pageIndex =1
limit 10,10 ==> pageIndex = 2
limit 20,10 ==> pageIndex = 3
limit 30,10 ==> pageIndex = 4

-->


</mapper>